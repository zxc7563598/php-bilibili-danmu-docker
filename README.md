# php-bilibili-danmu-docker

âš ï¸ æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œç¦æ­¢ç”¨äºå•†ä¸šæˆ–éæ³•ç”¨é€”ã€‚

è¿™æ˜¯ [php-bilibili-danmu](https://github.com/zxc7563598/php-bilibili-danmu) é¡¹ç›®çš„ Docker é…ç½®æ–‡ä»¶ï¼Œæ—¨åœ¨æä¾›ä¸€é”®å¼çš„ Docker ç¯å¢ƒæ­å»ºï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿéƒ¨ç½²å“”å“©å“”å“©ç›´æ’­æœºå™¨äººã€‚

---

[bilibili-danmu](https://github.com/zxc7563598/php-bilibili-danmu)æ˜¯ä¸€ä¸ªé›†å¼¹å¹•ç›‘æ§ã€ç¤¼ç‰©ç­”è°¢ã€å®šæ—¶å¹¿å‘Šã€å…³æ³¨æ„Ÿè°¢ã€è‡ªåŠ¨å›å¤ç­‰åŠŸèƒ½äºä¸€ä½“çš„ç»¼åˆæ€§å·¥å…·ã€‚å®ƒå†…ç½®äº†å®Œæ•´çš„ç§¯åˆ†å•†åŸç³»ç»Ÿï¼Œæ”¯æŒç§æœ‰éƒ¨ç½²ï¼Œæ— éœ€å®¡æ ¸é™åˆ¶ã€‚ç”¨æˆ·å¯é€šè¿‡ç­¾åˆ°æˆ–å¼€é€šå¤§èˆªæµ·ç­‰è¡Œä¸ºè‡ªåŠ¨è·å–ç§¯åˆ†ï¼Œå¹¶ç”¨äºå…‘æ¢ç¤¼ç‰©ã€‚

è¿™ä¸ä»…è®©å®ƒè¶…è¶Šäº†ä¸€èˆ¬çš„å¼¹å¹•æœºå™¨äººï¼Œæ›´æˆä¸ºä¸€ä¸ªæå‡è§‚ä¼—äº’åŠ¨ã€å¢å¼ºç›´æ’­ç²˜æ€§ã€åŠ©åŠ›ä¸»æ’­å˜ç°çš„å…¨æ–¹ä½è§£å†³æ–¹æ¡ˆã€‚

## æ ¸å¿ƒåŠŸèƒ½

* **ç§¯åˆ†å•†åŸ**ï¼šç”¨æˆ·å¯é€šè¿‡æ¯æ—¥ç­¾åˆ°æˆ–å¼€é€šç›´æ’­é—´å¤§èˆªæµ·è·å–ç§¯åˆ†ï¼Œå…‘æ¢å•†åŸä¸­çš„è™šæ‹Ÿé“å…·æˆ–å®ä½“ç¤¼å“ã€‚
* **ç›´æ’­é—´æ‰“å¡ç­¾åˆ°**ï¼šç”¨æˆ·æ¯æ—¥å®Œæˆç›´æ’­é—´ç­¾åˆ°ï¼Œå¯ç´¯è®¡/è¿ç»­è®°å½•ç­¾åˆ°å¤©æ•°ï¼Œå¹¶è·å¾—ç›¸åº”ç§¯åˆ†ï¼Œç”¨äºå…‘æ¢ç§¯åˆ†å•†åŸå†…çš„å„ç±»å•†å“ã€‚
* **PKæ’­æŠ¥**ï¼šPKå¯¹æˆ˜å¼€å¯å‰ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ’­æŠ¥å¯¹æ‰‹ç›´æ’­é—´æˆå‘˜æ´»è·ƒåº¦åŠè´¡çŒ®æ¦œå•ä¿¡æ¯ï¼Œå¯è‡ªå®šä¹‰æ’­æŠ¥å†…å®¹ã€‚
* **ç¤¼ç‰©ç­”è°¢**ï¼šæ”¶åˆ°è§‚ä¼—ç¤¼ç‰©æ—¶è‡ªåŠ¨è§¦å‘ç­”è°¢åŠŸèƒ½ï¼Œæ”¯æŒè‡ªå®šä¹‰ç­”è°¢é‡‘é¢é—¨æ§›å’Œå¤šæ¡ä¸ªæ€§åŒ–ç­”è°¢æ–‡æ¡ˆã€‚
* **å®šæ—¶å¹¿å‘Š**ï¼šå®šæ—¶å‘é€é¢„è®¾å†…å®¹è‡³ç›´æ’­é—´ï¼Œæ”¯æŒé…ç½®å¤šæ¡æ–‡æ¡ˆå¹¶æ™ºèƒ½éšæœºè½®æ’­ã€‚
* **è¿›æˆ¿æ¬¢è¿**ï¼šç”¨æˆ·è¿›å…¥ç›´æ’­é—´æ—¶è‡ªåŠ¨æ¬¢è¿ï¼Œå¹¶æ”¯æŒé…ç½®å¤šæ¡å·®å¼‚åŒ–æ¬¢è¿è¯æœ¯éšæœºå±•ç¤ºã€‚
* **æ„Ÿè°¢å…³æ³¨**ï¼šç”¨æˆ·å…³æ³¨ç›´æ’­é—´æ—¶è‡ªåŠ¨æ„Ÿè°¢ï¼Œå¹¶æ”¯æŒé…ç½®å¤šæ¡å·®å¼‚åŒ–æ¬¢è¿è¯æœ¯éšæœºå±•ç¤ºã€‚
* **æ„Ÿè°¢åˆ†äº«**ï¼šç”¨æˆ·åˆ†äº«ç›´æ’­é—´æ—¶è‡ªåŠ¨æ„Ÿè°¢ï¼Œå¹¶æ”¯æŒé…ç½®å¤šæ¡å·®å¼‚åŒ–æ¬¢è¿è¯æœ¯éšæœºå±•ç¤ºã€‚
* **è‡ªåŠ¨å›å¤**ï¼šå½“ç”¨æˆ·å¼¹å¹•è§¦å‘é¢„è®¾å…³é”®è¯æ—¶ï¼Œç³»ç»Ÿå°†æ™ºèƒ½åŒ¹é…å¹¶éšæœºæ¨é€å·®å¼‚åŒ–å›å¤å†…å®¹ï¼Œæ”¯æŒè‡ªå®šä¹‰å¤šå¥—å›å¤æ–¹æ¡ˆã€‚
* **è‡ªåŠ¨ç¦è¨€**ï¼šåŸºäºè‡ªåŠ¨å›å¤åŠŸèƒ½ï¼Œå½“è§¦å‘è‡ªåŠ¨å›å¤è§„åˆ™æ—¶ï¼Œå¯å¯¹è¿è§„ç”¨æˆ·æ‰§è¡Œä¸´æ—¶ç¦è¨€å¤„ç½šï¼ŒåŒæ—¶æ”¯æŒç”¨æˆ·é€šè¿‡èµ é€æŒ‡å®šä»·å€¼çš„ç”µæ± ç¤¼ç‰©æ¥æå‰è§£é™¤ç¦è¨€çŠ¶æ€ã€‚

## éƒ¨ç½²æ–¹æ¡ˆ

### æ–°æ‰‹æ¨èæ–¹æ¡ˆï¼šDockerä¸€é”®éƒ¨ç½²

å¯èƒ½ä¸æ˜¯æœ€å®Œç¾çš„æ–¹æ¡ˆï¼Œä½†å®ƒä¸€å®šæ˜¯å¯¹æ–°æ‰‹æœ€å‹å¥½çš„é€‰æ‹©ï¼šä¸€é”®é…ç½®ï¼Œå‘½ä»¤æ‰§è¡Œåé™å¾…å®Œæˆï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨æ‹‰å–ã€é…ç½®å¹¶ä¿æŒæ›´æ–°ï¼Œå…¨ç¨‹æ— éœ€é¢å¤–æ“ä½œã€‚

åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
curl -fsSL https://bilibili-danmu-scripts.oss-cn-hongkong.aliyuncs.com/install-docker.sh | bash 
```

> **æ²¡æœ‰å¼€å‘åŸºç¡€çš„ç”¨æˆ·** è¯·ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯ [é˜¿é‡Œäº‘](https://cn.aliyun.com) ä½äº **é¦™æ¸¯** åœ°åŸŸçš„ **Ubuntu  24.04 64ä½** ç‰ˆæœ¬çš„æœåŠ¡å™¨ã€‚è¿™æ˜¯ä¸€å¥—ç»è¿‡éªŒè¯çš„ç¯å¢ƒï¼Œèƒ½æœ€å¤§ç¨‹åº¦å‡å°‘éƒ¨ç½²é—®é¢˜

> å…¶ä»–äº‘æœåŠ¡å•†æˆ–ç³»ç»Ÿç‰ˆæœ¬æœªåšå…¼å®¹æ€§æµ‹è¯•ï¼Œä¸æ’é™¤å‡ºç°é—®é¢˜çš„å¯èƒ½æ€§ã€‚å¦‚æœä½ é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ¥é—®æˆ‘ï¼Œæˆ‘ä¹æ„å¸®å¿™ï¼Œå…¨å½“äº¤ä¸ªæœ‹å‹ã€‚ä½†ä¸ä¿è¯è§£å†³ã€‚

> ä¸€é”®éƒ¨ç½²è„šæœ¬å†™å¾—å¾ˆç®€å•ï¼Œä¸ä¾èµ–å¤æ‚é€»è¾‘ï¼Œæœ‰åŠ¨æ‰‹èƒ½åŠ›çš„ç”¨æˆ·å®Œå…¨å¯ä»¥è‡ªè¡Œè°ƒæ•´ç¯å¢ƒã€‚å®Œå…¨ä¸æ‡‚çš„æœ‹å‹ï¼Œå»ºè®®æŒ‰æ¨èç¯å¢ƒæ¥ï¼Œåˆ«è‡ªæ‰¾éº»çƒ¦ã€‚

> ä¸ä¼šè´­ä¹°æœåŠ¡å™¨çœ‹ä¸‹æ–¹ã€Œä¸€äº›é—®é¢˜ã€ä¸­çš„ã€Œå…³äºè´­ä¹°æœåŠ¡å™¨ã€

> è´­ä¹°æœåŠ¡å™¨ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨çš„çœ‹ä¸‹æ–¹ã€Œä¸€äº›é—®é¢˜ã€ä¸­çš„ã€Œè´­ä¹°äº†æœåŠ¡å™¨è¦å¦‚ä½•ä½¿ç”¨ã€

### æ‰‹åŠ¨éƒ¨ç½²æ–¹æ¡ˆ

> ä»¥ä¸‹æ˜¯æ‰‹åŠ¨éƒ¨ç½²é¡¹ç›®çš„æ¨èæµç¨‹ï¼Œé€‚åˆå…·å¤‡åŸºæœ¬ PHP ç¯å¢ƒæ­å»ºç»éªŒçš„ç”¨æˆ·ã€‚

åå°æœ¬ä½“ï¼š[Githubä»“åº“](https://github.com/zxc7563598/php-bilibili-danmu)

* **ç¯å¢ƒè¦æ±‚**ï¼šLNMP ç¯å¢ƒï¼ŒPHP 8.1+ï¼Œéœ€å®‰è£… Redisã€Brotliã€GD æ‰©å±•
* **é¡¹ç›®ç»“æ„**ï¼šæ ‡å‡† PHP é¡¹ç›®ï¼Œä¾èµ–ç®¡ç†é‡‡ç”¨ Composerï¼Œç¬¦åˆç°ä»£å¼€å‘è§„èŒƒã€‚é¦–æ¬¡è¿è¡Œå‰è¯·æ‰§è¡Œ `composer install`â€‹ å®‰è£…ä¾èµ–ã€‚
* **æ•°æ®åº“è¿ç§»**ï¼šä½¿ç”¨ Phinx è¿›è¡Œç®¡ç†ã€‚è¯·åœ¨å®Œæˆ `.env`â€‹ é…ç½®åŠä¾èµ–å®‰è£…åï¼Œæ‰§è¡Œ `php vendor/bin/phinx migrate -e development`â€‹ è¿›è¡Œæ•°æ®åº“ç»“æ„åˆå§‹åŒ–ï¼ˆéœ€æå‰åˆ›å»ºä¸€ä¸ª UTF8MB4 ç¼–ç çš„æ•°æ®åº“ï¼‰ã€‚
* **è¿è¡Œæ–¹å¼**ï¼šåŸºäº Webman æ¡†æ¶ï¼Œå¯åŠ¨æµç¨‹ä¸å®˜æ–¹ä¸€è‡´ï¼Œè¯¦ç»†è¯´æ˜å¯å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://www.workerman.net/doc/webman/others/nginx-proxy.html)
    ```bash
    git clone https://github.com/zxc7563598/php-bilibili-danmu.git ./
    cp .env.example .env
    # ä¿®æ”¹ .env é…ç½®ï¼Œå‚è€ƒ .env.example å¡«å†™
    composer install
    php vendor/bin/phinx migrate -e development
    php start.php start -d
    ```

[![Admin](https://img.shields.io/badge/vue--bilibili--danmu--admin-å‰ç«¯ï¼šç®¡ç†åå°-42b883?style=for-the-badge&logo=vue.js)](https://github.com/zxc7563598/vue-bilibili-danmu-admin)
[![Shop](https://img.shields.io/badge/vue--bilibili--danmu--shop-å‰ç«¯ï¼šç§»åŠ¨ç«¯ç§¯åˆ†å•†åŸ-3eaf7c?style=for-the-badge&logo=vue.js)](https://github.com/zxc7563598/vue-bilibili-danmu-shop)

* **ç¯å¢ƒè¦æ±‚**ï¼šæœ¬åœ° NodeJs ç¯å¢ƒ
* **é¡¹ç›®ç»“æ„**ï¼šåŸºäº Vite æ„å»ºçš„ Vue æ ‡å‡†é¡¹ç›®ï¼Œé¦–æ¬¡ä½¿ç”¨è¯·å…ˆé€šè¿‡ `npm install`â€‹ å®‰è£…ä¾èµ–ã€‚
* **è¿è¡Œæ–¹å¼**ï¼šæ‰€æœ‰ npm å‘½ä»¤å‡ä¿æŒé»˜è®¤é…ç½®ï¼Œé€šè¿‡ `npm run dev` å¯åŠ¨å¼€å‘æ¨¡å¼ï¼Œé€šè¿‡ `npm run build` æ‰“åŒ…ç”Ÿäº§ç‰ˆæœ¬ã€‚é…ç½®æ–‡ä»¶é€šè¿‡ `.env` ç®¡ç†ï¼Œå¯å‚è€ƒ `.env.example`
    ```bash
    git clone å¯¹åº”çš„ä»“åº“ ./
    cp .env.example .env
    # ä¿®æ”¹ .env é…ç½®ï¼Œå‚è€ƒ .env.example å¡«å†™
    npm install
    npm run build
    ```

---

## ğŸ§© é…å¥—é¡¹ç›®

[![Core](https://img.shields.io/badge/php--bilibili--danmu--core-Bç«™äº¤äº’æ ¸å¿ƒæ¨¡å—-blueviolet?style=for-the-badge&logo=php)](https://github.com/zxc7563598/php-bilibili-danmu-core)
[![Docker](https://img.shields.io/badge/php--bilibili--danmu--docker-Dockerä¸€é”®éƒ¨ç½²å®¹å™¨-2496ed?style=for-the-badge&logo=docker)](https://github.com/zxc7563598/php-bilibili-danmu-docker)
[![API](https://img.shields.io/badge/php--bilibili--danmu-é¡¹ç›®æœ¬ä½“-007acc?style=for-the-badge&logo=php)](https://github.com/zxc7563598/php-bilibili-danmu)
[![Admin](https://img.shields.io/badge/vue--bilibili--danmu--admin-å‰ç«¯ï¼šç®¡ç†åå°-42b883?style=for-the-badge&logo=vue.js)](https://github.com/zxc7563598/vue-bilibili-danmu-admin)
[![Shop](https://img.shields.io/badge/vue--bilibili--danmu--shop-å‰ç«¯ï¼šç§»åŠ¨ç«¯ç§¯åˆ†å•†åŸ-3eaf7c?style=for-the-badge&logo=vue.js)](https://github.com/zxc7563598/vue-bilibili-danmu-shop)